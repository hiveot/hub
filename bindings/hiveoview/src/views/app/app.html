<!--Main application view with header, page content and footer-->
<!--javascript the regular get takes place-->

<div id="app" class="app" hx-ext="sse" sse-connect="/sse">
    <!--  Handle the sse logout event-->
    <!--    <span hx-get="/login"-->
    <!--          hx-target="body" sse-swap="logout"-->
    <!--          hx-trigger="sse:logout" hidden>log me out</span>-->

    <div class="app-head ">
        {{block "appHead" .}}App header goes here {{end}}
    </div>

    <!-- These pages are updated using htmx fragments.
        eg: hx-get="/dashboard" hx-target="#dashboard" hx-swap="innerHtml"
     -->
    <div class="app-pages" tabindex="1" style="outline: none">
        <div id="status" displayIfTarget="/status">{{template "status.html" .}}</div>
        <div id="dashboard" displayIfTarget="/dashboard">{{template "dashboard.html" .}}</div>
        <div id="directory" displayIfTarget="/directory">{{template "directory.html" .}}</div>
        <div id="about" displayIfTarget="/about">{{template "about.html" .}}</div>
        <div id="thing" displayIfTarget="/thing">{{template "thingDetails.html" .}}</div>
    </div>

    <div class=" ">
        {{block "appFooter" .}} App footer for {{.title}} goes here {{end}}
    </div>
</div>


<style>
    .app {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow-y: hidden; /*no scrollbar at the app*/
    }

    .app-head {
        /*just some testing for pixel perfect placement??*/
        /*margin-top: -1px;*/
        /*padding-top: 1px;*/
    }

    .app-pages {
        width: 100%;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
    }

    /* App sub-pages are hidden until the URL path matches 'displayIfTarget' attr*/
    .app-pages > div {
        display: none;
        /*visibility: hidden;*/
    }

    /*pseudoclass :target is replaced by JS util 'displayIfTarget' using path instead of hash
     * keep the following selector as a reminder
     */
    .app-pages > div:target {
        /*display: flex;*/
        /*visibility: visible;*/
    }

    /* default icons are a tiny 14px */
    iconify-icon {
        font-size: 20px;
    }


</style>
